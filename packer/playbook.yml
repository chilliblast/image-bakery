---
- hosts: all
  become: yes
  vars:
    ansible_python_interpreter: /usr/bin/python
  pre_tasks:
    - name: gather ec2 facts
      action: ec2_metadata_facts
      tags:
        - always

- hosts: concourse
  become: yes
  vars:
#    ansible_python_interpreter: /usr/bin/python3
    ansible_python_interpreter: /usr/bin/python
    role: web
    docker_version: 17.12.1
  roles:
    - concourse

- hosts: drone
  become: yes
  vars:
#    ansible_python_interpreter: /usr/bin/python3
    ansible_python_interpreter: /usr/bin/python
    docker_version: 17.12.1
  roles:
    - drone

- hosts: jenkins
  become: yes
  vars:
    jenkins_package_state: latest
#    jenkins_http_port: 80
  roles:
    - common
    - geerlingguy.jenkins

- hosts: jenkins-build-server
  become: yes
  vars:
  roles:
    - common
    - jenkins-build-server

- hosts: localhost
  become: no
  vars:
    role: web
    docker_version: 17.12.1
  roles:
#    - sandbox
